# Dell PowerEdge C410X kernel config fragment
# Applied on top of aspeed_g4_defconfig via scripts/kconfig/merge_config.sh
#
# The C410X has an AST2050 BMC with 128MB DDR2 RAM managing a 16-slot
# PCIe GPU expansion chassis. This fragment adds C410X-specific drivers
# and disables subsystems not present on this hardware.

# --- C410X-specific hardware drivers ---

# 16x INA219 high-side current/power monitors (one per PCIe slot)
CONFIG_SENSORS_INA2XX=y

# 2x ADT7462 fan/thermal controllers (manage 8 fans + 6 temp zones)
CONFIG_SENSORS_ADT7462=y

# 5x PCA9555 GPIO expanders (slot presence, power, attention, MRL, system)
# NOTE: The DTS compatible "nxp,pca9555" matches the gpio-pca953x driver
CONFIG_GPIO_PCA953X=y

# I2C mux support for PCA9544A and PCA9548 behind which sit ADT7462
# thermal controllers and per-slot TMP75 temperature sensors.
# These are in aspeed_g4_defconfig but listed explicitly for clarity.
CONFIG_I2C_MUX=y
CONFIG_I2C_MUX_PCA954x=y

# 16x TMP75 per-slot temperature sensors + 1x LM75 front-board sensor
# Already in aspeed_g4_defconfig but listed explicitly since the C410X
# has 17 of these sensors and they are critical for thermal management.
CONFIG_SENSORS_LM75=y

# --- Optimize for 128MB memory constraint ---
CONFIG_CC_OPTIMIZE_FOR_SIZE=y

# --- Initramfs boot support ---
# BLK_DEV_INITRD is already in g4_defconfig; RD_GZIP is default-on
# but we explicitly set it for clarity
CONFIG_RD_GZIP=y

# --- Disable subsystems not present on C410X ---
# No USB ports on the BMC board
CONFIG_USB_SUPPORT=n

# No display output needed (headless chassis, VGA unused)
CONFIG_DRM=n

# No video capture hardware
CONFIG_MEDIA_SUPPORT=n

# No SD/MMC slots
CONFIG_MMC=n

# No FSI (IBM Power-specific interface)
CONFIG_FSI=n

# No wireless hardware
CONFIG_WLAN=n
CONFIG_WIRELESS=n
